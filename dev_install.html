
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Developer Setup &#8212; ENTR Data Environment 0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Contributing Guidelines" href="contributing.html" />
    <link rel="prev" title="Production Deployment Guidelines" href="production_deployment.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <span class="target" id="dev-install"></span><section id="developer-setup">
<h1>Developer Setup<a class="headerlink" href="#developer-setup" title="Permalink to this heading">¶</a></h1>
<p>This section contains information on how to begin developing the components of the ENTR Runtime environment.</p>
<section id="running-entr-in-dev-mode">
<h2>Running ENTR in Dev Mode<a class="headerlink" href="#running-entr-in-dev-mode" title="Permalink to this heading">¶</a></h2>
<p>The ENTR runtime contains the following preinstalled components: OpenOA, entr_warehouse. To develop these components, you check out development versions of these packages to your local filesystem, and then start the entr image with these paths mounted as volumes. This allows you to edit the code in these components on your local machine, and see the changes immediately reflected in the runtime. If <code class="docutils literal notranslate"><span class="pre">$ENTR_HOME</span></code> is the directory you’d like to work from:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$ENTR_HOME</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span> <span class="pre">https://github.com/entralliance/entr_warehouse.git</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span> <span class="pre">https://github.com/entralliance/OpenOA.git</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span> <span class="pre">https://github.com/entralliance/entr_runtime.git</span></code></p></li>
<li><p>Optionally, build the entr image. You can also use the dev image from the container registry as discussed in Quickstart.</p></li>
<li><p>Now, start the entr container in dev mode, mapping the directories you checked out to paths within the container:
<code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">-p</span> <span class="pre">8888:8888</span> <span class="pre">-v</span> <span class="pre">$ENTR_HOME/OpenOA:/home/jovyan/src/OpenOA</span> <span class="pre">-v</span> <span class="pre">$ENTR_HOME/entr_warehouse:/home/jovyan/src/entr_warehouse</span></code>.</p></li>
<li><p>Once inside the container, you will then need to re-install OpenOA in editable mode, or run <code class="docutils literal notranslate"><span class="pre">dbt</span> <span class="pre">run</span></code> as needed to materialize any changes to the dbt model code in the warehouse.</p>
<ul class="simple">
<li><p>To install OpenOA in editable mode:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">/home/jovyan/src/OpenOA</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.</span></code></p></li>
</ul>
</li>
<li><p>To re-run DBT:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">/home/jovyan/src/entr_warehouse</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dbt</span> <span class="pre">run</span></code></p></li>
</ul>
</li>
</ul>
</li>
</ol>
</section>
<section id="to-update-the-warehouse">
<h2>To Update the Warehouse<a class="headerlink" href="#to-update-the-warehouse" title="Permalink to this heading">¶</a></h2>
<p>Changes to the warehouse may require re-running dbt. To do this:</p>
<ol class="arabic simple">
<li><p>Open a terminal from Jupyter (File &gt; New &gt; Terminal) and navigate to the location where your dbt project is installed (see section “Assumed Repository Structure” section below) using <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">~/src/entr_warehouse</span></code> and run <code class="docutils literal notranslate"><span class="pre">dbt</span> <span class="pre">debug</span></code> to test your connection to the Spark warehouse.</p></li>
<li><p>Once the connection to the warehouse is confirmed, install the dbt packages for your project using <code class="docutils literal notranslate"><span class="pre">dbt</span> <span class="pre">deps</span></code></p></li>
<li><p>Seed the metadata tables contained in the entr_warehouse repo using <code class="docutils literal notranslate"><span class="pre">dbt</span> <span class="pre">seed</span></code> to instantiate them in the Spark warehouse</p></li>
<li><p>(Re-)register example or newly added source data files with <code class="docutils literal notranslate"><span class="pre">dbt</span> <span class="pre">run-operation</span> <span class="pre">stage_external_sources</span></code></p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">dbt</span> <span class="pre">run</span></code> to build all models in the Spark warehouse, which can now be consumed by any application connected to the Spark warehouse such as OpenOA</p></li>
</ol>
</section>
<section id="advanced-topics">
<h2>Advanced Topics<a class="headerlink" href="#advanced-topics" title="Permalink to this heading">¶</a></h2>
<p>Extra ports:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">p</span> <span class="mi">8888</span><span class="p">:</span><span class="mi">8888</span> <span class="o">-</span><span class="n">p</span> <span class="mi">8080</span><span class="p">:</span><span class="mi">8080</span> <span class="o">-</span><span class="n">p</span> <span class="mi">4040</span><span class="p">:</span><span class="mi">4040</span> <span class="n">entr</span><span class="o">/</span><span class="n">entr</span><span class="o">-</span><span class="n">runtime</span>
</pre></div>
</div>
<p>Override OpenOA and entr_warehouse with local versions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">p</span> <span class="mi">8888</span><span class="p">:</span><span class="mi">8888</span> <span class="o">-</span><span class="n">p</span> <span class="mi">8080</span><span class="p">:</span><span class="mi">8080</span> <span class="o">-</span><span class="n">p</span> <span class="mi">4040</span><span class="p">:</span><span class="mi">4040</span> <span class="o">-</span><span class="n">v</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">local</span><span class="o">-</span><span class="n">clone</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">OpenOA</span><span class="o">&gt;</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">jovyan</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">OpenOA</span> <span class="o">-</span><span class="n">v</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">local</span><span class="o">-</span><span class="n">clone</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">entr_warehouse</span><span class="o">&gt;</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">jovyan</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">entr_warehouse</span> <span class="n">entr</span><span class="o">/</span><span class="n">entr</span><span class="o">-</span><span class="n">runtime</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
<p>Note, you will then need to re-install OpenOA in editable mode, or run <code class="docutils literal notranslate"><span class="pre">dbt</span> <span class="pre">run</span></code> as needed to update the container with the new code.</p>
<p>Beeline connect string for ENTR warehouse:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>beeline
!connect jdbc:hive2://localhost:10000
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">ENTR Data Environment</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="openoa_examples.html">OpenOA Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_integration.html">ENTR Warehousing Guidelines and ENTR Data Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="production_deployment.html">Production Deployment Guidelines</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Developer Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#running-entr-in-dev-mode">Running ENTR in Dev Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="#to-update-the-warehouse">To Update the Warehouse</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-topics">Advanced Topics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting Guidelines</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="production_deployment.html" title="previous chapter">Production Deployment Guidelines</a></li>
      <li>Next: <a href="contributing.html" title="next chapter">Contributing Guidelines</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, ENTR Alliance.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.1.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/dev_install.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>