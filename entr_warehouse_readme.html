
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Background &#8212; ENTR Data Environment 0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <p>Welcome to the ENTR Data Warehouse</p>
<section id="background">
<h1>Background<a class="headerlink" href="#background" title="Permalink to this heading">¶</a></h1>
<p>The ENTR Warehouse is a <a class="reference external" href="https://www.getdbt.com/">dbt</a> project with the goal of providing a common ground of data (formats and transformation methods) upon which renewable energy industry users can build and share analytical applications. Once an industry user integrates his or her data into the generic fact and dimension tables in the ENTR model, he or she will then be able to utilize any associated applications that were built on top of the standard ENTR table schema.</p>
</section>
<section id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading">¶</a></h1>
<p>The <a class="reference external" href="https://github.com/entralliance/entr_runtime">ENTR Runtime</a> Docker image contains all of the dependencies needed for this tutorial including a standalone Apache Spark warehouse that can be used for running everything contained within the ENTR Warehouse dbt project. See the installation guide <a class="reference external" href="https://entralliance.github.io/install.html">here</a> for how to build and set up the ENTR Runtime.</p>
</section>
<section id="entr-data-model">
<h1>ENTR Data Model<a class="headerlink" href="#entr-data-model" title="Permalink to this heading">¶</a></h1>
<p><a class="reference external" href="https://docs.getdbt.com/docs/building-a-dbt-project/documentation#overview">dbt docs</a> for the entr_warehouse dbt project can be found at <a class="reference external" href="https://entralliance.github.io/entr_warehouse">https://entralliance.github.io/entr_warehouse</a>. This interface is useful for exploring and understanding the ENTR data model.</p>
</section>
<section id="how-to-bring-your-own-data">
<h1>How to Bring Your Own Data<a class="headerlink" href="#how-to-bring-your-own-data" title="Permalink to this heading">¶</a></h1>
<p><em>Note:</em> the following steps require at least basic experience with building models in dbt.</p>
<p>The ENTR Runtime image contains pre-built models defined by the ENTR Warehouse based on open-source example data; however, for users wishing to bring their own data, the ENTR Warehouse supports setup of new sources from CSV and other Spark-readable file types by leveraging the <a class="reference external" href="https://github.com/dbt-labs/dbt-external-tables/tree/main">dbt-external-tables</a> package from dbt-labs.</p>
<ul class="simple">
<li><p>With a clone of this entr_warehouse project mounted to the ENTR Runtime, drop a copy of the file you’d like to process through the ENTR data model into the <code class="docutils literal notranslate"><span class="pre">data/</span></code> directory</p></li>
<li><p>Within the <code class="docutils literal notranslate"><span class="pre">models/staging/</span></code> directory, write out the source definition for the new file within a YML file in the staging directory using the <a class="reference external" href="https://github.com/dbt-labs/dbt-external-tables/tree/main">dbt-external-tables</a> guides as needed</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">dbt</span> <span class="pre">run-operation</span> <span class="pre">stage_external_sources</span></code> to make the file available as a source relation in dbt from which you can start building further transformations</p></li>
<li><p>See the four files within the <code class="docutils literal notranslate"><span class="pre">data/</span></code> folder and their corresponding source definitions within the <a class="reference external" href="https://github.com/entralliance/entr_warehouse/blob/main/models/staging/entr_sample_data/entr_sample_data.yml">entr_sample_data.yml file</a> for examples</p></li>
</ul>
<p>Once the new file is set as a source, you will need to transform the data into the standard ENTR fact table format - to build the dbt transformations, you’ll need to define and map the dimensional components of the new data utilizing the standard ENTR dimension table formats.</p>
<ul class="simple">
<li><p>You’ll likely notice that the initial step in the transformation of the example sources (files) is just performing type casting (see the examples within the models/staging/entr_sample_data/intermediate directory)</p>
<ul>
<li><p>Prepares the data for reshaping/pivoting; we expect this will be a frequently necessary staging step</p></li>
<li><p>Assignment of dimensional keys, e.g. <a class="reference external" href="https://github.com/entralliance/entr_warehouse/blob/e3eeb3e693349a2a6297274d686ef7f884a5bc18/models/staging/entr_sample_data/intermediate/int_entr_era5_sample__cast.sql#L4-L5">here</a></p></li>
</ul>
</li>
<li><p>For the assignment of dimensional foreign keys, which is required for all ENTR Warehouse tables in their current state, the ENTR dimensions must be extended. For example, if the data you’re preparing is not from La Haute Borne, a new plant must be added as a record within the <a class="reference external" href="https://github.com/entralliance/entr_warehouse/blob/main/seeds/seed_asset_plant.csv">seeds/seed_asset_plant</a> dbt CSV seed file in order for the transformations to run properly, and the same goes for the other dimensional data assignments.</p>
<ul>
<li><p>Note: not every field within the dimensions will be useful or used in analyses or transformations, so it may be ok to leave some blank to start depending on your use case</p></li>
</ul>
</li>
<li><p>In addition to extending the seeded ENTR dimensions, it may be useful or necessary to seed mapping files that are specific to a source to facilitate the translation of data into ENTR vernacular; we expect this to most commonly be done for mapping identifiers in the data you bring to ENTR tag IDs within the ENTR dimension</p>
<ul>
<li><p>For example, the following files map the example 4 La Haute Borne example data sets’ fields to ENTR tags. These tables are used to join on the ENTR tag IDs to the appropriate fields once the source table has been reshaped/unpivoted to have the original column names in a field</p>
<ul>
<li><p><a class="reference external" href="https://github.com/entralliance/entr_warehouse/blob/main/seeds/seed_la_haute_borne_era5_tag_map.csv">seed_la_haute_borne_era5_tag_map</a></p></li>
<li><p><a class="reference external" href="https://github.com/entralliance/entr_warehouse/blob/main/seeds/seed_la_haute_borne_merra2_tag_map.csv">seed_la_haute_borne_merra2_tag_map</a></p></li>
<li><p><a class="reference external" href="https://github.com/entralliance/entr_warehouse/blob/main/seeds/seed_la_haute_borne_scada_tag_map.csv">seed_la_haute_borne_scada_tag_map</a></p></li>
<li><p><a class="reference external" href="https://github.com/entralliance/entr_warehouse/blob/main/seeds/seed_plant_data_tag_map.csv">seed_plant_data_tag_map</a></p></li>
</ul>
</li>
<li><p>Note: we don’t yet have standards defined for creating new ENTR tags, but that functionality will be coming soon</p></li>
</ul>
</li>
<li><p>Once all metadata about the new data from the newly loaded file is available, the last staging step is transforming the data into the relevant ENTR generic fact table schema, which can be found in this project’s dbt docs, e.g. <a class="reference external" href="https://entralliance.github.io/entr_warehouse/#!/model/model.entr_warehouse.fct_entr_wtg_scada">here</a> for the generic wind turbine SCADA data fact table. The current generic ENTR fact tables are as follows:</p>
<ul>
<li><p><a class="reference external" href="https://entralliance.github.io/entr_warehouse/#!/model/model.entr_warehouse.fct_entr_plant_data">fct_entr_plant_data</a></p></li>
<li><p><a class="reference external" href="https://entralliance.github.io/entr_warehouse/#!/model/model.entr_warehouse.fct_entr_wtg_scada">fct_entr_wtg_scada</a></p></li>
<li><p><a class="reference external" href="https://entralliance.github.io/entr_warehouse/#!/model/model.entr_warehouse.fct_entr_reanalysis_data">fct_entr_reanalysis_data</a></p>
<ul>
<li><p><strong>Note</strong>: this model is a good example showing 2 staged data sets (the ERA5 and MERRA2 La Haute Borne reanalysis data) flowing into the same generic ENTR fact table for guidance in the following step</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Once a staging model has been created for your new source data that matches the associated generic ENTR fact table schema, you will just need to union that new staging model with the generic ENTR fact table ready to make the new data ready for consumption by ENTR-based applications.</p></li>
</ul>
</section>
<section id="resources">
<h1>Resources<a class="headerlink" href="#resources" title="Permalink to this heading">¶</a></h1>
<ul class="simple">
<li><p>Learn more about dbt from the <a class="reference external" href="https://docs.getdbt.com/docs/introduction">dbt docs</a></p></li>
<li><p>Check out the <a class="reference external" href="https://discourse.getdbt.com/">dbt Discourse</a> for commonly asked questions and answers</p></li>
<li><p>Join the <a class="reference external" href="http://slack.getdbt.com/">dbt Slack chat</a> for live discussions and support</p></li>
<li><p>Find <a class="reference external" href="https://events.getdbt.com">dbt events</a> near you</p></li>
<li><p>Check out <a class="reference external" href="https://blog.getdbt.com/">the dbt blog</a> for the latest news on dbt’s development and best practices</p></li>
</ul>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">ENTR Data Environment</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="openoa_examples.html">OpenOA Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_integration.html">ENTR Warehousing Guidelines and ENTR Data Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="production_deployment.html">Production Deployment Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev_install.html">Developer Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting Guidelines</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, ENTR Alliance.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/entr_warehouse_readme.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>